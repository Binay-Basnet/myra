query getCOAList($filter: ChartsOfAccountFilter!) {
  settings {
    general {
      chartsOfAccount {
        accounts(filter: $filter) {
          data {
            id
            name
            under
            accountClass
            accountCode
            currency
            accountType
            openingBalance
          }
        }
      }
    }
  }
}

query getCoaFullView {
  settings {
    chartsOfAccount {
      fullView {
        data {
          id
          name
          under
          accountType
          accountClass
          accountCode
          category
          allowedBalance
          transactionAllowed
          allowDirectPostingFromJV
          allowMultipleLedger
        }
      }
    }
  }
}

query searchCOA($coaName: String!) {
  settings {
    general {
      chartsOfAccount {
        search(name: $coaName) {
          data {
            id
            name
            accountCode
          }
        }
      }
    }
  }
}

query getCOAAccountsUnderList($accountCode: [String]) {
  settings {
    chartsOfAccount {
      accountsUnder(accountCode: $accountCode) {
        data {
          id
          accountCode
          name
        }
      }
    }
  }
}

query getCOAAccountsUnderLeafList($parentId: [String]!, $currentBranch: Boolean) {
  settings {
    chartsOfAccount {
      accountsUnderLeaf(parentId: $parentId, currentBranch: $currentBranch) {
        accountId
        name
      }
    }
  }
}

query getCoaAccountList(
  $branchId: [String!]
  $pagination: Pagination
  $filter: COAListFilter
  $flag: COAListFlag
) {
  settings {
    chartsOfAccount {
      coaAccountList(branchId: $branchId, pagination: $pagination, filter: $filter, flag: $flag) {
        edges {
          node {
            accountCode
            accountName
            accountClass
            parentGroup
            branch
            balance
          }
        }
        totalCount
        pageInfo {
          hasNextPage
          hasPreviousPage
          startCursor
          endCursor
        }
      }
    }
  }
}

query getLedgerForJVPosting($pagination: Pagination, $filter: COAListFilter) {
  settings {
    chartsOfAccount {
      ledgersForJVPosting(pagination: $pagination, filter: $filter) {
        edges {
          node {
            id
            accountCode
            accountName
            accountClass
            parentGroup
            branch
          }
        }
        totalCount
        pageInfo {
          hasNextPage
          hasPreviousPage
          startCursor
          endCursor
        }
        error {
          ...MutationError
        }
      }
    }
  }
}

query getCOAAccountDetails($id: String!, $branch: String) {
  settings {
    chartsOfAccount {
      coaAccountDetails(id: $id, branchId: $branch) {
        data {
          meta {
            accountName
            accountId
            accountType
            createdDate
            isLoanAccount
            isSavingAccount
            parentId
          }
          overview {
            openingBalance
            dr
            cr
            closingBalance
            balanceType
          }
          totalNoOfTxns
          recentTxns {
            date
            txnId
            txnType
            debit
            credit
            balanceType
            particulars
            total
          }
        }
      }
    }
  }
}

query getCOALeafNodeDetails($id: ID!, $branch: [String]) {
  settings {
    chartsOfAccount {
      coaLeafNodeDetails(id: $id, branch: $branch) {
        data {
          id
          accountName
          accountType
          date
          noOfAccounts
          drAmount
          crAmount
          closingBalance
          balanceType
          ledgers {
            accountCode
            date
            ledgerName
            serviceCenter
            balance
            balanceType
            status
          }
        }
      }
    }
  }
}

query getLedgerList(
  $id: ID!
  $pagination: Pagination
  $filter: Filter
  $branchId: [String!]
) {
  settings {
    chartsOfAccount {
      coaLedgerList(id: $id, pagination: $pagination, filter: $filter, branchId: $branchId) {
        totalCount
        pageInfo {
          hasNextPage
          hasPreviousPage
          startCursor
          endCursor
        }
        edges {
          node {
            id
            accountCode
            date
            ledgerName
            serviceCenter
            balance
            balanceType
            status
          }
          cursor
        }
      }
    }
  }
}

query getCOAAccountsAllTransactionList($id: ID!, $pagination: Pagination) {
  settings {
    chartsOfAccount {
      ledgerAllTransactionsList(ledgerId: $id, pagination: $pagination) {
        totalCount
        pageInfo {
          hasNextPage
          hasPreviousPage
          startCursor
          endCursor
        }
        edges {
          node {
            date
            txnId
            txnType
            particulars
            debit
            credit
            total
            balanceType
          }
          cursor
        }
      }
    }
  }
}
