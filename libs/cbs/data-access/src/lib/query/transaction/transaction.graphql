query getDepositListData($filter: Filter, $pagination: Pagination) {
  transaction {
    listDeposit(filter: $filter, pagination: $pagination) {
      totalCount
      edges {
        node {
          ID
          transactionCode
          name
          amount
          state
          paymentMode
          processedBy
          date
          agentName
          agentId
          profilePicUrl
          agentPicUrl
        }
        cursor
      }
      pageInfo {
        hasNextPage
        hasPreviousPage
        startCursor
        endCursor
      }
    }
  }
}

query getWithdrawListData($filter: Filter, $pagination: Pagination) {
  transaction {
    listWithdraw(filter: $filter, pagination: $pagination) {
      totalCount
      edges {
        node {
          ID
          transactionCode
          name
          amount
          state
          paymentMode
          processedBy
          date
          profilePicUrl
        }
        cursor
      }
      pageInfo {
        hasNextPage
        hasPreviousPage
        startCursor
        endCursor
      }
    }
  }
}

query getAccountTransferListData($filter: Filter, $pagination: Pagination) {
  transaction {
    listTransfer(filter: $filter, pagination: $pagination) {
      totalCount
      edges {
        node {
          ID
          transactionCode
          amount
          state
          transferType
          date
        }
        cursor
      }
      pageInfo {
        hasNextPage
        hasPreviousPage
        startCursor
        endCursor
      }
    }
  }
}

query getEndOfDayDateData {
  transaction {
    endOfDayDate {
      value
      hasErrors
      isInitialized
      headOfficeReady
    }
  }
}

query getTellerTransactionListData($filter: TellerTransactionFilter, $pagination: Pagination) {
  transaction {
    listTellerTransaction(filter: $filter, pagination: $pagination) {
      totalCount
      edges {
        node {
          ID
          transferCode
          transferType
          transferState
          srcTeller
          amount
          destTeller
          date
          srcProfilePic
          destProfilePic
          srcProfilePicUrl
          destProfilePicUrl
          destBranch
          srcBranch
          denomination {
            value
            quantity
            amount
          }
        }
        cursor
      }
      pageInfo {
        hasNextPage
        hasPreviousPage
        startCursor
        endCursor
      }
    }
  }
}

query transactionDepositDetail($transactionId: ID!) {
  transaction {
    viewDeposit(transactionId: $transactionId) {
      data {
        id
        transactionCode
        member {
          id
          code
          objState
          code
          type
          name
          contact
          profilePic
          profilePicUrl
        }
        transactionDate
        accountId
        accountName
        voucherId
        amount
        fine
        rebate
        totalDepositedAmount
        status
        paymentMode
        # paymentFile
        sourceOfFund
        depositedBy
        depositedDate
        paymentFile
        transactionBranch
        teller
        glTransaction {
          account
          debit
          credit
          serviceCenter
          ledgerId
          balance
          balanceType
        }
        totalDebit
        totalCredit
        note
      }
    }
  }
}

query transactionWithdrawDetail($transactionId: ID!) {
  transaction {
    viewWithdraw(transactionId: $transactionId) {
      data {
        id
        member {
          id
          code
          name
          profilePic
          profilePicUrl
        }
        transactionDate
        transactionCode
        accountId
        accountName
        chequeNo
        withdrawAmount
        withdrawWith
        fine
        totalWithdrawnAmount
        status
        paymentMode
        paymentFile
        withdrawnBy
        marketRepId
        marketRepName
        transactionBranch
        teller
        glTransaction {
          account
          debit
          credit
          serviceCenter
          ledgerId
          balance
          balanceType
        }
        totalDebit
        totalCredit
        note
      }
    }
  }
}

query transactionAccountTransferDetail($transactionId: ID!) {
  transaction {
    viewAccountTransfer(transactionId: $transactionId) {
      data {
        id
        member {
          id
          name
          code
          profilePic
          profilePicUrl
        }
        transactionCode
        transactionDate
        transferAmount
        sourceAccount {
          id
          accountName
        }
        destinationAccount {
          id
          accountName
        }
        transferType
        recipientMember {
          id
          name
        }
        #transactionData
        withdrawnBy
        withdrawnSlipNo
        transactionBranch
        objState
        transactionBranch
        teller
        glTransaction {
          account
          debit
          credit
          serviceCenter
          ledgerId
          balance
          balanceType
        }
        totalDebit
        totalCredit
        note
      }
    }
  }
}

query agentTransactionDetail($agentId: ID!, $date: String!) {
  transaction {
    viewAgentList(agentId: $agentId, date: $date) {
      data {
        transactionId
        transactionDate
        status
        totalAmount
        assignedMember {
          transactionId
          member
          account
          amount
        }
      }
    }
  }
}

query getAgentDetail($id: ID!) {
  transaction {
    agentDetail(id: $id) {
      data {
        id
        name
        branch
        totalMembers
        profilePicUrl
      }
    }
  }
}

query loanRepaymentDetail($paymentId: ID!) {
  transaction {
    viewLoanRepayment(paymentId: $paymentId) {
      data {
        repaymentId
        member {
          id
          code
          name
          profilePicUrl
        }
        transactionCode
        loanSubType
        loanAccountId
        loanAccountName
        repaymentDate
        installmentNo
        installmentAmount
        fine
        rebate
        totalRepaymentAmount
        objState
        installmentDetails {
          installmentNo
          payment
          principalAmount
          interestAmount
        }
        paymentMode
        depositedBy
        depositedDate
        transactionBranch
        teller
        glTransaction {
          account
          debit
          credit
          serviceCenter
          ledgerId
          balance
          balanceType
        }
        totalDebit
        totalCredit
        note
        discount
        discountDocs {
          id
          url
        }
      }
    }
  }
}

query getEODStatus {
  transaction {
    eodStatus {
      stage
      overAllStatus
      eodDate
      states {
        currentBranchesReady
        interestBooking
        interestPosting
        transactionDate
        maturity
        dormancy
        cashInHand
        cashInVault
        loanInterestBooking
        loanRepayment
      }
      errors {
        readiness
        interestBooking
        interestPosting
        maturity
        dormancy
        cashInHand
        cashInVault
        loanInterestBooking
        loanRepayment
      }
    }
  }
}

query getAllTransactionsList($filter: Filter, $pagination: Pagination) {
  transaction {
    listAllTransactions(filter: $filter, pagination: $pagination) {
      totalCount
      edges {
        node {
          id
          transactionType
          narration
          amount
          date
          branchName
        }
        cursor
      }
      pageInfo {
        hasNextPage
        hasPreviousPage
        startCursor
        endCursor
      }
    }
  }
}

query getAllTransactionsDetail($id: ID!, $txnType: AllTransactionType) {
  transaction {
    viewTransactionDetail(transactionId: $id, txnType: $txnType) {
      data {
        id
        user
        member {
          id
          code
          name
          profilePicUrl
        }
        transactionDate
        txnType
        transactionMode
        amount
        branch
        note
        status
        glTransaction {
          account
          serviceCenter
          debit
          credit
          ledgerId
          balance
          balanceType
        }
        totalDebit
        totalCredit
      }
    }
  }
}

query getSTRTransactionDetail($transactionId: ID!) {
  transaction {
    strTransactionDetail(transactionId: $transactionId) {
      data {
        memberType
        strStatus
        bio {
          memberName
          profilePic
          memberCode
          memberJoined
          dob
          gender
          mobile
          email
          currentAddress
          permanentAddress
          maritalStatus
          profession
          nationality
          familyMembers {
            relationship
            fullName
            dob
          }
          identificationDetail {
            id
            idNo
            idType
            place
            date
            additionalFields {
              id
              fieldId
              value
            }
          }
          docs {
            key
            value
          }
        }
        strAccountDetails {
          id
          natureOfAccount
          natureOfOwnership
          nameOfDirector
          accountOpenDate
        }
        savingAccounts {
          id
          accountName
          product {
            nature
          }
          balance
        }
        transactionDetails {
          accountNo
          year
          drTransactionNo
          drTransactionAmount
          crTransactionNo
          crTransactionAmount
          closingBalance
        }
        deposits {
          id
          date
          transactionCode
          depositer
          amount
          remarks
        }
        withdraw {
          id
          date
          transactionCode
          depositer
          amount
          remarks
        }
        loanAccount {
          id
          LoanAccountName
          product {
            id
            productName
          }
          totalSanctionedAmount
          remainingBalance
          remainingInterestTillDate
        }
        strReason
        strTopology
      }
      error {
        ...QueryError
      }
    }
  }
}

query eodHistory($transactionDate: Localized) {
  endOfDay {
    history(transactionDate: $transactionDate) {
      eodDate
      status
      completedTime
      errorCount
      completedBy
    }
  }
}

query eodHistoryDetails($pagination: Pagination, $filter: EODDetailsFilter!) {
  endOfDay {
    details(pagination: $pagination, filter: $filter) {
      edges {
        node {
          id
          jobType
          success
          accountNumber
          narration
          payload
        }
        cursor
      }
      totalCount
      pageInfo {
        hasNextPage
        hasPreviousPage
        startCursor
        endCursor
      }
    }
  }
}

fragment OptionType on LabelValueArray {
  label
  value
}

query getDepositFilterMapping {
  transaction {
    filterMapping {
      deposit {
        depositedBy {
          ...OptionType
        }
        paymentMode {
          ...OptionType
        }
      }
    }
  }
}

query getWithdrawFilterMapping {
  transaction {
    filterMapping {
      withdraw {
        paymentMode {
          ...OptionType
        }
      }
    }
  }
}

query getAccountTransferFilterMapping {
  transaction {
    filterMapping {
      transfer {
        type {
          ...OptionType
        }
      }
    }
  }
}

query getAgentFilterMapping {
  transaction {
    filterMapping {
      agent {
        branchId {
          ...OptionType
        }
      }
    }
  }
}

query getAllTransactionFilterMapping {
  transaction {
    filterMapping {
      allTransaction {
        branchId {
          ...OptionType
        }
        txnType {
          ...OptionType
        }
      }
    }
  }
}
